# Production Baseline v3.0 - Release Summary

**Release Date:** November 18, 2025
**Status:** Production Ready
**Previous Version:** v2.x (DEPRECATED)

---

## Quick Stats

### Baseline Strategy (All Trades)
- **21,241 trades** over 9.5 years (Apr 2016 - Nov 2025)
- **681.58% total return** ($1M → $7.8M)
- **-9.88% max drawdown**
- **46.29% win rate**, 2.03 profit factor

### Conservative Allocation Strategy (>= 1.0% slope filter)
- **16,185 trades** (76.3% of baseline)
- **1,067.52% total return** ($1M → $11.7M)
- **29.50% annualized return**
- **-7.09% max drawdown**
- **98.5% of symbols profitable** (266/270)
- **2025 YTD: +9.95%**

---

## What Changed in v3.0

### Critical Fix: Bar Synchronization

**Problem:**
- Without `origin='epoch'` in resample calls, different symbols had misaligned 4-day bar boundaries
- Symbols were exiting on different dates (Nov 5, 6, 7) when all should exit on the same bar
- Portfolio metrics were systematically biased

**Solution:**
- Added `origin='epoch'` to all `df.resample('4D')` calls
- All symbols now share identical bar boundaries synchronized to Unix epoch
- All recent trades now exit on Nov 4, 2025

**Impact:**
- Total P&L: +$514 (+0.005%)
- Final Portfolio: +$297K (+2.6%)
- More accurate drawdown measurement (-7.09% vs -5.49%)
- +63 trades (+0.4%)

### Verification Completed

**Bar Consistency:**
- All 30 recent trades exit on same date (Nov 4)
- 10 sampled symbols share 894 common bar dates
- All bars exactly 4 days apart
- Day-of-week rotation confirmed

**Trading Days:**
- All daily data contains ONLY Mon-Fri trading days
- No weekend price data included
- Bar timestamps can fall on weekends (window boundaries), but OHLC data comes from trading days only

---

## Performance Highlights

### Annual Returns
- **Average: 30.21%** per year
- Best: 2020 (+96.90%)
- Worst: 2022 (-2.33%)
- 9/10 years positive

### Monthly Pattern
- **All 12 months positive** average returns
- Best: November (+3.07%)
- Worst: October (+1.05%)

### Top 5 Symbols
1. APLD: $821K (57 trades, 8.52% avg slope)
2. NVAX: $369K (66 trades, 5.67% avg slope)
3. TNDM: $209K (68 trades, 3.63% avg slope)
4. TBCH: $203K (61 trades, 3.89% avg slope)
5. FCEL: $190K (67 trades, 6.31% avg slope)

---

## Key Files (v3.0)

### Documentation
- `VERSION.txt` - Version marker
- `PRODUCTION_BASELINE_V3.0.md` - Full documentation (27 pages)
- `V3.0_RELEASE_SUMMARY.md` - This summary
- `RESYNC_RESULTS_COMPARISON.md` - Before/after comparison
- `RERUN_PLAN.md` - 9-phase execution plan

### Core Data
- `baseline_trades_20251118_075140.csv` - All 21,241 trades
- `trades_with_slopes_2.2a_20251118_082119.csv` - With entry slopes
- `allocation_trades_20251118_085133.csv` - Conservative subset (16,185)
- `conservative_portfolio_data_20251118_085203.csv` - Portfolio timeline

### Analysis Outputs
- Annual/monthly returns CSV
- Symbol performance analysis (all/top/bottom 25)
- 25 trade visualization charts + HTML viewer
- Portfolio equity curve charts (full + 2025)

### Verification
- `bar_consistency_verification_20251118_105309.txt` - 5 tests passed
- `verify_bar_consistency.py` - Verification script
- `verify_trading_days_only.py` - Trading days verification

---

## Strategy Parameters

**Entry:**
- 4-day Heikin Ashi bars
- 13-period LinReg, 0 lookahead
- Enter when HA close crosses above LinReg

**Exit:**
- 21-period LinReg, -3 lookahead
- Exit when HA close crosses below LinReg

**Position Sizing (Conservative):**
- Slope >= 5.0%: $20K (2.0x)
- Slope >= 3.0%: $15K (1.5x)
- Slope >= 2.0%: $12K (1.2x)
- Slope >= 1.0%: $10K (1.0x)
- Slope < 1.0%: Skip trade

**Universe:**
- 270 symbols (large/mid cap)
- Date range: Jan 2016 - Nov 2025

---

## Production Checklist

Before going live:
- [ ] Verify `origin='epoch'` in all resample calls
- [ ] Test bar synchronization across symbols
- [ ] Implement position sizing logic
- [ ] Set concurrent position limits (recommend 250 max)
- [ ] Configure risk management (max drawdown alerts)
- [ ] Set up daily reconciliation
- [ ] Implement P&L tracking vs backtest

---

## Risk Notes

**Drawdown:**
- Historical max: -7.09%
- Typical: -2% to -4%
- 2025 max: -1.58%

**Capital Requirements:**
- Minimum: $1M for diversification
- Recommended: $2M+ for 200+ concurrent positions
- Reserve: 20% cash buffer

**Limitations:**
- No slippage or transaction costs modeled
- Assumes perfect fills at bar close
- No stop-loss mechanism
- Performance in extreme volatility not extensively tested

---

## Version Comparison

| Metric | v2.x | v3.0 | Δ |
|--------|------|------|---|
| Trades | 16,122 | 16,185 | +63 |
| Return | 1,037.81% | 1,067.52% | +29.71pp |
| Final $ | $11.38M | $11.68M | +$297K |
| Max DD | -5.49% | -7.09% | -1.60pp* |
| Ann Ret | 29.15% | 29.50% | +0.35pp |

*More accurate due to proper synchronization

---

## Next Steps

1. **For Production:** Use v3.0 results for all decisions
2. **Quarterly Review:** Re-run backtest with updated data (Feb 2026)
3. **Live Monitoring:** Track performance vs backtest expectations
4. **Symbol Universe:** Review annually for additions/removals

---

**v3.0 is the official, verified, production-ready baseline.**

See `PRODUCTION_BASELINE_V3.0.md` for complete documentation.
